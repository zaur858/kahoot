{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { socket } from \"../services/socket\";\nimport { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nexport default function GameLobbyScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _route$params = route.params,\n    isHost = _route$params.isHost,\n    quizId = _route$params.quizId,\n    studentPin = _route$params.pin,\n    username = _route$params.username;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    players = _useState2[0],\n    setPlayers = _useState2[1];\n  var _useState3 = useState(studentPin || ''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    pin = _useState4[0],\n    setPin = _useState4[1];\n  useEffect(function () {\n    socket.connect();\n    if (isHost) {\n      var newPin = Math.floor(100000 + Math.random() * 900000).toString();\n      setPin(newPin);\n      socket.emit('join_game', {\n        pin: newPin,\n        username: 'HOST'\n      });\n    } else {\n      socket.emit('join_game', {\n        pin: studentPin,\n        username: username\n      });\n    }\n    socket.on('player_joined', function (player) {\n      setPlayers(function (prev) {\n        return [].concat(_toConsumableArray(prev), [player]);\n      });\n    });\n    socket.on('game_started', function () {\n      navigation.navigate('Game', {\n        isHost: isHost,\n        quizId: quizId,\n        pin: pin\n      });\n    });\n    return function () {\n      socket.off('player_joined');\n      socket.off('game_started');\n    };\n  }, []);\n  var startGame = function startGame() {\n    socket.emit('start_game', pin);\n    navigation.navigate('Game', {\n      isHost: isHost,\n      quizId: quizId,\n      pin: pin\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(Text, {\n      style: styles.header,\n      children: [\"Oyun PIN: \", pin]\n    }), _jsx(Text, {\n      style: styles.subHeader,\n      children: isHost ? 'Oyunçular gözlənilir...' : 'Oyunun başlaması gözlənilir...'\n    }), _jsx(FlatList, {\n      data: players,\n      keyExtractor: function keyExtractor(item) {\n        return item.socketId;\n      },\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsx(Text, {\n          style: styles.player,\n          children: item.username\n        });\n      }\n    }), isHost && _jsx(Button, {\n      title: \"Oyunu Ba\\u015Flat\",\n      onPress: startGame\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    alignItems: 'center'\n  },\n  header: {\n    fontSize: 32,\n    fontWeight: 'bold',\n    marginBottom: 20\n  },\n  subHeader: {\n    fontSize: 18,\n    marginBottom: 20\n  },\n  player: {\n    fontSize: 20,\n    padding: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    width: '100%',\n    textAlign: 'center'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","FlatList","Button","StyleSheet","socket","jsxs","_jsxs","jsx","_jsx","GameLobbyScreen","_ref","route","navigation","_route$params","params","isHost","quizId","studentPin","pin","username","_useState","_useState2","_slicedToArray","players","setPlayers","_useState3","_useState4","setPin","connect","newPin","Math","floor","random","toString","emit","on","player","prev","concat","_toConsumableArray","navigate","off","startGame","style","styles","container","children","header","subHeader","data","keyExtractor","item","socketId","renderItem","_ref2","title","onPress","create","flex","padding","alignItems","fontSize","fontWeight","marginBottom","borderBottomWidth","borderBottomColor","width","textAlign"],"sources":["C:/Users/user/kahoot/mobile-app/src/screens/GameLobbyScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text, FlatList, Button, StyleSheet } from 'react-native';\r\nimport { socket } from '../services/socket';\r\n\r\nexport default function GameLobbyScreen({ route, navigation }) {\r\n    const { isHost, quizId, pin: studentPin, username } = route.params;\r\n    const [players, setPlayers] = useState([]);\r\n    const [pin, setPin] = useState(studentPin || '');\r\n\r\n    useEffect(() => {\r\n        socket.connect();\r\n\r\n        if (isHost) {\r\n            // Generate random PIN for host\r\n            const newPin = Math.floor(100000 + Math.random() * 900000).toString();\r\n            setPin(newPin);\r\n            socket.emit('join_game', { pin: newPin, username: 'HOST' });\r\n        } else {\r\n            socket.emit('join_game', { pin: studentPin, username });\r\n        }\r\n\r\n        socket.on('player_joined', (player) => {\r\n            setPlayers((prev) => [...prev, player]);\r\n        });\r\n\r\n        socket.on('game_started', () => {\r\n            navigation.navigate('Game', { isHost, quizId, pin });\r\n        });\r\n\r\n        return () => {\r\n            socket.off('player_joined');\r\n            socket.off('game_started');\r\n        };\r\n    }, []);\r\n\r\n    const startGame = () => {\r\n        socket.emit('start_game', pin);\r\n        navigation.navigate('Game', { isHost, quizId, pin });\r\n    };\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Text style={styles.header}>Oyun PIN: {pin}</Text>\r\n            <Text style={styles.subHeader}>{isHost ? 'Oyunçular gözlənilir...' : 'Oyunun başlaması gözlənilir...'}</Text>\r\n\r\n            <FlatList\r\n                data={players}\r\n                keyExtractor={(item) => item.socketId}\r\n                renderItem={({ item }) => (\r\n                    <Text style={styles.player}>{item.username}</Text>\r\n                )}\r\n            />\r\n\r\n            {isHost && (\r\n                <Button title=\"Oyunu Başlat\" onPress={startGame} />\r\n            )}\r\n        </View>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, padding: 20, alignItems: 'center' },\r\n    header: { fontSize: 32, fontWeight: 'bold', marginBottom: 20 },\r\n    subHeader: { fontSize: 18, marginBottom: 20 },\r\n    player: { fontSize: 20, padding: 10, borderBottomWidth: 1, borderBottomColor: '#eee', width: '100%', textAlign: 'center' }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}